(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-338e03f8"],{"7f6f":function(t,e,i){},"99e6":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"service-list"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{name:"cinemaIndex"}}},[t._v("首页")]),i("el-breadcrumb-item",[t._v("服务管理")])],1),i("dir",{staticClass:"service-content"},[i("el-card",{class:"data-item",attrs:{shadow:"hover"}},[i("div",{staticClass:"add-service",on:{click:function(e){t.dialogFormVisible=!0}}},[t._v(" 添加服务 ")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.serviceListData,stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"标题"}}),i("el-table-column",{attrs:{prop:"content",label:"内容"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.row)}}},[t._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1),i("el-dialog",{attrs:{title:"添加影院服务",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"内容","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("关 闭")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAddService}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"修改影院服务",visible:t.dialogFormEditVisible},on:{"update:visible":function(e){t.dialogFormEditVisible=e}}},[i("el-form",{attrs:{model:t.form2}},[i("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1),i("el-form-item",{attrs:{label:"内容","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form2.content,callback:function(e){t.$set(t.form2,"content",e)},expression:"form2.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormEditVisible=!1}}},[t._v("关 闭")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleEditService}},[t._v("确 定")])],1)],1)],1)},o=[],a=(i("b0c0"),i("c1df"),{data:function(){return{serviceListData:[],dialogFormVisible:!1,dialogFormEditVisible:!1,formLabelWidth:"120px",loading:!1,form:{name:"",content:""},form2:{id:"",name:"",content:""}}},created:function(){var t=this;setTimeout((function(){void 0===t.$store.state.loginCinema.name&&t.$router.push({name:"cinemaLogin"}),t.getData()}),1e3)},methods:{handleEditService:function(){var t=this;""!==this.form2.name&&""!==this.form2.content?this.$api.updateCinemaService(this.form2.id,{name:this.form2.name,content:this.form2.content},"cinema").then((function(e){e?(t.success("修改成功！"),t.getData(),t.dialogFormEditVisible=!1):t.error("修改")})):this.warning()},handleAddService:function(){var t=this;""!==this.form.name&&""!==this.form.content?this.$api.addCinemaService({name:this.form.name,content:this.form.content,CinemaId:this.$store.state.loginCinema.id},"cinema").then((function(e){e?(t.success("添加成功！"),t.getData(),t.dialogFormVisible=!1,t.form.name="",t.form.content=""):t.error("添加")})):this.warning()},handleEdit:function(t){this.dialogFormEditVisible=!0,this.form2.name=t.name,this.form2.content=t.content,this.form2.id=t.id},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$api.deleteCinemaService(t.id,"cinema").then((function(t){t?(e.success("删除成功！"),e.getData()):e.error("删除")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getData:function(){var t=this;this.$api.getCinemaServiceList({limit:999999,cinemaid:this.$store.state.loginCinema.id},"cinema").then((function(e){t.serviceListData=e.data}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})},success:function(t){this.$notify({title:t,message:t+"!",type:"success"})},error:function(t){this.$notify.error({title:"失败",message:t+"失败！"})}}}),r=a,l=(i("e4d4"),i("2877")),s=Object(l["a"])(r,n,o,!1,null,null,null);e["default"]=s.exports},e4d4:function(t,e,i){"use strict";var n=i("7f6f"),o=i.n(n);o.a}}]);
//# sourceMappingURL=chunk-338e03f8.01e63e0d.js.map