(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b4a37c"],{"048f":function(e,t,a){"use strict";var n=a("e952"),i=a.n(n);i.a},"95cb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen-list"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("影厅列表")])],1),a("dir",{staticClass:"screen-content"},[a("el-card",{class:"data-item",attrs:{shadow:"hover"}},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入影厅ID"},on:{change:e.handleChange},model:{value:e.searchScreenId,callback:function(t){e.searchScreenId=t},expression:"searchScreenId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleScreenId},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入影厅名"},on:{change:e.handleChange},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchName},slot:"append"})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.screenDataList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"索引"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"id",label:"影厅ID"}}),a("el-table-column",{attrs:{prop:"name",label:"影厅名"}}),a("el-table-column",{attrs:{prop:"seat",label:"位置信息"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e.total>e.limit?[a("el-pagination",{attrs:{"current-page":e.nowPage,"page-size":e.limit,background:"",layout:"prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]:e._e()],2)],1),a("el-dialog",{attrs:{title:"影厅信息修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"影厅名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("div",{staticClass:"seat-content"},[a("div",{staticClass:"title-tip"},[a("span",[e._v("可选座位")]),a("span",[e._v("空白过道")])]),a("div",{staticClass:"seat-container"},[a("div",{staticClass:"tip"},[a("ul",e._l(e.form.seat,(function(t,n){return a("li",{key:n},[e._v(" "+e._s(e.letterList[n])+" ")])})),0)]),a("div",{staticClass:"right"},[a("div",{staticClass:"screen"},[e._v(" 银幕中央 ")]),a("div",{staticClass:"screen-content"},[a("ul",e._l(e.form.seat,(function(t,n){return a("li",{key:n,staticClass:"row"},[a("ul",e._l(t,(function(n,i){return a("li",{key:i,staticClass:"col",class:{active1:0===n,active2:1===n,active3:2===n,active4:3===n},on:{click:function(a){return e.handleClick(t,i)}}})})),0)])})),0)])])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditScreen}},[e._v("确 定")])],1)],1)],1)},i=[],s=(a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("96cf"),a("1da1")),r=a("5530"),l=a("c1df"),o=a.n(l),c={data:function(){return{nowPage:1,limit:15,total:0,screenData:[],loading:!0,searchScreenId:"",searchName:"",dialogFormVisible:!1,formLabelWidth:"120px",letterList:["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],form:{id:"",name:"",seat:[],people:0}}},computed:{screenDataList:function(){try{return this.screenData.slice(0).map((function(e){return e.createdAt=o()(e.createdAt).local().format("YYYY-MM-DD HH:mm:ss"),e}))}catch(e){}}},created:function(){var e=this;setTimeout((function(){void 0===e.$store.state.loginAdmin.name&&e.$router.push({name:"adminLogin"})}),1e3),this.getData()},methods:{handleClick:function(e,t){0===e[t]?(e.splice(t,1,3),this.form.people--):(e.splice(t,1,0),this.form.people++)},handleChange:function(){""!==this.searchScreenId||""!==this.searchName||this.getData()},handleEdit:function(e){this.form.id=e.id,this.form.name=e.name,this.form.people=e.people,this.form.seat=JSON.parse(e.seat),this.dialogFormVisible=!0},handleEditScreen:function(){var e=this;""!=this.form.name?this.$api.updateScreens(this.form.id,{name:this.form.name,seat:JSON.stringify(this.form.seat),people:this.form.people},"admin").then((function(t){t&&(e.dialogFormVisible=!1,e.success("修改成功"),e.getData())})):this.warning()},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该影厅, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$api.deleteScreens(e.id,"admin").then((function(e){e&&(t.$message({type:"success",message:"删除成功!"}),t.getData())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})},success:function(e){this.$notify({title:e,message:e+"!",type:"success"})},error:function(){this.$notify.error({title:"失败",message:"未查询到数据！"})},getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.$api.getScreensList(Object(r["a"])({limit:this.limit,page:this.nowPage},t),"admin").then((function(t){e.total=t.count,e.screenData=t.data,e.loading=!1}))},handleSizeChange:function(e){this.nowPage=e},handleCurrentChange:function(e){this.nowPage=e},handleScreenId:function(){var e=this;""!==this.searchScreenId?(this.loading=!0,this.$api.getScreensFindById(this.searchScreenId,"admin").then((function(t){t?(e.total=1,e.screenData=[t],e.loading=!1):(e.loading=!1,e.error())}))):this.getData()},handleSearchName:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.searchName){t.next=3;break}return e.getData(),t.abrupt("return");case 3:e.getData({name:e.searchName});case 4:case"end":return t.stop()}}),t)})))()}},watch:{nowPage:function(){var e={};""!==this.searchName&&(e.name=this.searchName),this.getData(e)}}},d=c,h=(a("048f"),a("2877")),u=Object(h["a"])(d,n,i,!1,null,null,null);t["default"]=u.exports},a434:function(e,t,a){"use strict";var n=a("23e7"),i=a("23cb"),s=a("a691"),r=a("50c4"),l=a("7b0b"),o=a("65f0"),c=a("8418"),d=a("1dde"),h=a("ae40"),u=d("splice"),m=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u||!m},{splice:function(e,t){var a,n,d,h,u,m,v=l(this),w=r(v.length),C=i(e,w),S=arguments.length;if(0===S?a=n=0:1===S?(a=0,n=w-C):(a=S-2,n=p(f(s(t),0),w-C)),w+a-n>g)throw TypeError(b);for(d=o(v,n),h=0;h<n;h++)u=C+h,u in v&&c(d,h,v[u]);if(d.length=n,a<n){for(h=C;h<w-n;h++)u=h+n,m=h+a,u in v?v[m]=v[u]:delete v[m];for(h=w;h>w-n+a;h--)delete v[h-1]}else if(a>n)for(h=w-n;h>C;h--)u=h+n-1,m=h+a-1,u in v?v[m]=v[u]:delete v[m];for(h=0;h<a;h++)v[h+C]=arguments[h+2];return v.length=w-n+a,d}})},e952:function(e,t,a){}}]);
//# sourceMappingURL=chunk-78b4a37c.95eca187.js.map