(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a0e7e1b","chunk-61d42db1"],{"234e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"movie-list"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("电影列表")])],1),a("dir",{staticClass:"movie-content"},[a("el-card",{class:"data-item",attrs:{shadow:"hover"}},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入电影ID"},on:{change:e.handleChange},model:{value:e.searchMovieId,callback:function(t){e.searchMovieId=t},expression:"searchMovieId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleMovieId},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入电影名称"},on:{change:e.handleChange},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchName},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入电影类型"},on:{change:e.handleChange},model:{value:e.searchMovieType,callback:function(t){e.searchMovieType=t},expression:"searchMovieType"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchMovieType},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入语言地区"},on:{change:e.handleChange},model:{value:e.searchRegion,callback:function(t){e.searchRegion=t},expression:"searchRegion"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchRegion},slot:"append"})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.movieDataList,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"电影ID"}}),a("el-table-column",{attrs:{prop:"name",label:"电影名称"}}),a("el-table-column",{attrs:{prop:"type",label:"电影类型"}}),a("el-table-column",{attrs:{prop:"duration",label:"影片时长"}}),a("el-table-column",{attrs:{prop:"region",label:"语言地区"}}),a("el-table-column",{attrs:{prop:"publishDate",label:"上映时间"}}),a("el-table-column",{attrs:{prop:"score",label:"影片评分"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e.total>e.limit?[a("el-pagination",{attrs:{"current-page":e.nowPage,"page-size":e.limit,background:"",layout:"prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]:e._e()],2)],1),a("el-dialog",{attrs:{title:"电影信息修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"影片名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"影片类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),a("el-form-item",{attrs:{label:"影片时长","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1),a("el-form-item",{attrs:{label:"上映时间","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.publishDate,callback:function(t){e.$set(e.form,"publishDate",t)},expression:"form.publishDate"}})],1),a("el-form-item",{attrs:{label:"上映地区","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),a("el-form-item",{attrs:{label:"影片评分","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),a("el-form-item",{attrs:{label:"累计票房","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.income,callback:function(t){e.$set(e.form,"income",t)},expression:"form.income"}})],1),a("el-form-item",{attrs:{label:"影片简介","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),a("el-form-item",{attrs:{label:"图片链接","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.imgUrl,callback:function(t){e.$set(e.form,"imgUrl",t)},expression:"form.imgUrl"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditUser}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("d81d"),a("fb6a"),a("b0c0"),a("5530")),r=(a("96cf"),a("1da1")),l=a("c1df"),s=a.n(l),c=(a("35b0"),{data:function(){return{nowPage:1,limit:15,total:0,movieData:[],loading:!0,searchMovieId:"",searchMovieType:"",searchName:"",searchRegion:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{id:"",name:"",type:"",duration:"",publishDate:"",region:"",score:"",income:"",introduce:"",imgUrl:""}}},computed:{movieDataList:function(){try{return this.movieData.slice(0).map((function(e){return e.createdAt=s()(e.createdAt).local().format("YYYY-MM-DD HH:mm:ss"),e}))}catch(e){}}},created:function(){var e=this;setTimeout((function(){void 0===e.$store.state.loginAdmin.name&&e.$router.push({name:"adminLogin"})}),1e3),this.getData()},methods:{handleChange:function(){""!==this.searchMovieId||""!==this.searchName||""!==this.searchRegion||""!==this.searchMovieType||this.getData()},handleEditUser:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.form.name&&""!==e.form.type&&""!==e.form.duration&&""!==e.form.publishDate&&""!==e.form.imgUrl&&""!==e.form.region&&""!==e.form.score&&""!==e.form.income&&""!==e.form.introduce){t.next=3;break}return e.warning(),t.abrupt("return");case 3:e.$api.updateMovie(e.form.id,{name:e.form.name,type:e.form.type,duration:e.form.duration,publishDate:e.form.publishDate,region:e.form.region,imgUrl:e.form.imgUrl,score:e.form.score,income:e.form.income,introduce:e.form.introduce},"admin").then((function(t){t&&(e.dialogFormVisible=!1,e.success("修改成功"),e.getData())}));case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.form.id=e.id,this.form.name=e.name,this.form.type=e.type,this.form.duration=e.duration,this.form.publishDate=e.publishDate,this.form.region=e.region,this.form.imgUrl=e.imgUrl,this.form.score=e.score,this.form.income=e.income,this.form.introduce=e.introduce,this.dialogFormVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$api.deleteMovie(e.id,"admin").then((function(e){e&&(t.$message({type:"success",message:"删除成功!"}),t.getData())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})},success:function(e){this.$notify({title:e,message:e+"!",type:"success"})},error:function(){this.$notify.error({title:"失败",message:"未查询到数据！"})},getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.$api.getMovieList(Object(n["a"])({limit:this.limit,page:this.nowPage},t),"admin").then((function(t){e.total=t.count,e.movieData=t.data,e.loading=!1}))},handleSizeChange:function(e){this.nowPage=e},handleCurrentChange:function(e){this.nowPage=e},handleMovieId:function(){var e=this;""!==this.searchMovieId?(this.loading=!0,this.$api.getMovieFindById(this.searchMovieId,"admin").then((function(t){t?(e.total=1,e.movieData=[t],e.loading=!1):(e.loading=!1,e.error())}))):this.getData()},handleSearchMovieType:function(){""!==this.searchMovieType?this.getData({type:this.searchMovieType}):this.getData()},handleSearchName:function(){""!==this.searchName?this.getData({name:this.searchName}):this.getData()},handleSearchRegion:function(){""!==this.searchRegion?this.getData({region:this.searchRegion}):this.getData()}},watch:{nowPage:function(){var e={};""!==this.searchName&&(e.name=this.searchName),""!==this.searchMovieType&&(e.type=this.searchMovieType),""!==this.searchRegion&&(e.region=this.searchRegion),this.getData(e)}}}),m=c,u=(a("7e1f"),a("2877")),d=Object(u["a"])(m,o,i,!1,null,null,null);t["default"]=d.exports},"35b0":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-page-login"},[a("div",{staticClass:"login-content"},[a("div",{staticClass:"logo"}),a("div",{staticClass:"content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"first",attrs:{label:"管理员账号 :",prop:"LoginId"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.LoginId,callback:function(t){e.$set(e.ruleForm,"LoginId",t)},expression:"ruleForm.LoginId"}})],1),a("el-form-item",{attrs:{label:"管理员密码 :",prop:"LoginPwd"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.LoginPwd,callback:function(t){e.$set(e.ruleForm,"LoginPwd",t)},expression:"ruleForm.LoginPwd"}})],1),a("el-form-item",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登 录")])],1)],1)],1)])])},i=[],n=(a("99af"),a("b0c0"),{data:function(){var e=function(e,t,a){var o=/^[a-zA-Z0-9_-]{4,16}$/;""===t?a(new Error("请输入管理员账号")):o.test(t)?a():a(new Error("请输入用户名格式为4到16位（字母，数字，下划线）"))},t=function(e,t,a){var o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\s\S]{8,16}$/;""===t?a(new Error("请输入管理员密码")):o.test(t)?a():a(new Error("密码必须为8-16位的字母数字或下划线组成"))};return{ruleForm:{LoginId:"",LoginPwd:""},rules:{LoginId:[{validator:e,trigger:"blur"}],LoginPwd:[{validator:t,trigger:"blur"}]}}},created:function(){var e=this;setTimeout((function(){void 0!==e.$store.state.loginAdmin.name&&(e.$router.push({name:"adminIndex"}),e.success(e.$store.state.loginAdmin.name,e.$store.state.loginAdmin.type))}),1e3)},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){return e?(t.$api.adminLogin(t.ruleForm.LoginId,t.ruleForm.LoginPwd).then((function(e){e?(t.success(e.name,e.type),t.$store.dispatch("changeAdmin",e),t.$router.push({name:"adminIndex"})):t.error()})),!0):(t.warning(),!1)}))},success:function(e,t){this.$notify({title:"登录成功",message:'登录成功，欢迎 "'.concat(e,'" ').concat(t,"！"),type:"success"})},error:function(){this.$notify.error({title:"账号或密码错误",message:"请重新登录！"})},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})}}}),r=n,l=(a("d472"),a("2877")),s=Object(l["a"])(r,o,i,!1,null,null,null);t["default"]=s.exports},5868:function(e,t,a){},"7e1f":function(e,t,a){"use strict";var o=a("5868"),i=a.n(o);i.a},"7e6c":function(e,t,a){},"99af":function(e,t,a){"use strict";var o=a("23e7"),i=a("d039"),n=a("e8b5"),r=a("861d"),l=a("7b0b"),s=a("50c4"),c=a("8418"),m=a("65f0"),u=a("1dde"),d=a("b622"),f=a("2d00"),h=d("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",b=f>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=u("concat"),w=function(e){if(!r(e))return!1;var t=e[h];return void 0!==t?!!t:n(e)},y=!b||!v;o({target:"Array",proto:!0,forced:y},{concat:function(e){var t,a,o,i,n,r=l(this),u=m(r,0),d=0;for(t=-1,o=arguments.length;t<o;t++)if(n=-1===t?r:arguments[t],w(n)){if(i=s(n.length),d+i>p)throw TypeError(g);for(a=0;a<i;a++,d++)a in n&&c(u,d,n[a])}else{if(d>=p)throw TypeError(g);c(u,d++,n)}return u.length=d,u}})},d472:function(e,t,a){"use strict";var o=a("7e6c"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-7a0e7e1b.14c422b5.js.map