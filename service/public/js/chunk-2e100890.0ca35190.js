(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e100890"],{6381:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"banner-list"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("广告列表")])],1),a("dir",{staticClass:"banner-content"},[a("el-card",{class:"data-item",attrs:{shadow:"hover"}},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入广告ID"},on:{change:t.handleChange},model:{value:t.searchBannerId,callback:function(e){t.searchBannerId=e},expression:"searchBannerId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleBannerId},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入标题"},on:{change:t.handleChange},model:{value:t.searchTitle,callback:function(e){t.searchTitle=e},expression:"searchTitle"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchTitle},slot:"append"})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.bannerDataList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"索引"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"id",label:"广告ID"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"imgUrl",label:"图片链接"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t.total>t.limit?[a("el-pagination",{attrs:{"current-page":t.nowPage,"page-size":t.limit,background:"",layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})]:t._e()],2)],1),a("el-dialog",{attrs:{title:"Banner信息修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{disabled:"",label:"链接","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.imgUrl,callback:function(e){t.$set(t.form,"imgUrl",e)},expression:"form.imgUrl"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEditBanner}},[t._v("确 定")])],1)],1)],1)},i=[],r=(a("d81d"),a("fb6a"),a("b0c0"),a("96cf"),a("1da1")),l=a("5530"),o=a("c1df"),s=a.n(o),c={data:function(){return{nowPage:1,limit:15,total:0,bannerData:[],loading:!0,searchBannerId:"",searchTitle:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{id:"",title:"",imgUrl:""}}},computed:{bannerDataList:function(){try{return this.bannerData.slice(0).map((function(t){return t.createdAt=s()(t.createdAt).local().format("YYYY-MM-DD HH:mm:ss"),t}))}catch(t){}}},created:function(){var t=this;setTimeout((function(){void 0===t.$store.state.loginAdmin.name&&t.$router.push({name:"adminLogin"})}),1e3),this.getData()},methods:{handleChange:function(){""!==this.searchBannerId||""!==this.searchTitle||this.getData()},handleEdit:function(t){this.form.id=t.id,this.form.title=t.title,this.form.imgUrl=t.imgUrl,this.dialogFormVisible=!0},handleEditBanner:function(){var t=this;""!=this.form.title&&""!=this.form.imgUrl?this.$api.updateBanner(this.form.id,{title:this.form.title,imgUrl:this.form.imgUrl},"admin").then((function(e){e&&(t.dialogFormVisible=!1,t.success("修改成功"),t.getData())})):this.warning()},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$api.deleteBanner(t.id,"admin").then((function(t){t&&(e.$message({type:"success",message:"删除成功!"}),e.getData())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})},success:function(t){this.$notify({title:t,message:t+"!",type:"success"})},error:function(){this.$notify.error({title:"失败",message:"未查询到数据！"})},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.$api.getBannerList(Object(l["a"])({limit:this.limit,page:this.nowPage},e),"admin").then((function(e){t.total=e.count,t.bannerData=e.data,t.loading=!1}))},handleSizeChange:function(t){this.nowPage=t},handleCurrentChange:function(t){this.nowPage=t},handleBannerId:function(){var t=this;""!==this.searchBannerId?(this.loading=!0,this.$api.getBannerFindById(this.searchBannerId,"admin").then((function(e){e?(t.total=1,t.bannerData=[e],t.loading=!1):(t.loading=!1,t.error())}))):this.getData()},handleSearchTitle:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.searchTitle){e.next=3;break}return t.getData(),e.abrupt("return");case 3:t.getData({title:t.searchTitle});case 4:case"end":return e.stop()}}),e)})))()}},watch:{nowPage:function(){var t={};""!==this.searchTitle&&(t.title=this.searchTitle),this.getData(t)}}},d=c,h=(a("a187"),a("2877")),u=Object(h["a"])(d,n,i,!1,null,null,null);e["default"]=u.exports},"9ae1":function(t,e,a){},a187:function(t,e,a){"use strict";var n=a("9ae1"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-2e100890.0ca35190.js.map