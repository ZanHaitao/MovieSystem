(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53283cd6"],{5300:function(t,e,a){},"58cb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-list"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("管理员列表")])],1),a("dir",{staticClass:"admin-content"},[a("el-card",{class:"data-item",attrs:{shadow:"hover"}},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入管理员ID"},on:{change:t.handleChange},model:{value:t.searchAdminId,callback:function(e){t.searchAdminId=e},expression:"searchAdminId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleAdminId},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入管理员账号ID"},on:{change:t.handleChange},model:{value:t.searchLoginId,callback:function(e){t.searchLoginId=e},expression:"searchLoginId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchLoginId},slot:"append"})],1),a("el-input",{attrs:{placeholder:"请输入管理员姓名"},on:{change:t.handleChange},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchName},slot:"append"})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.adminDataList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"索引"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"id",label:"管理员ID"}}),a("el-table-column",{attrs:{prop:"loginId",label:"管理员账号"}}),a("el-table-column",{attrs:{prop:"name",label:"管理员姓名"}}),a("el-table-column",{attrs:{prop:"type",label:"管理员类别"}}),"超级管理员"===t.$store.state.loginAdmin.type?a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}],null,!1,1333084871)}):t._e()],1),t.total>t.limit?[a("el-pagination",{attrs:{"current-page":t.nowPage,"page-size":t.limit,background:"",layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})]:t._e()],2)],1),a("el-dialog",{attrs:{title:"管理员信息修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"登录账号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.loginId,callback:function(e){t.$set(t.form,"loginId",e)},expression:"form.loginId"}})],1),a("el-form-item",{attrs:{label:"用户姓名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEditAdmin}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a("d81d"),a("fb6a"),a("b0c0"),a("5530")),l=a("c1df"),s=a.n(l),r={data:function(){return{nowPage:1,limit:15,total:0,adminData:[],loading:!0,searchAdminId:"",searchLoginId:"",searchName:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{id:"",name:"",loginId:""}}},computed:{adminDataList:function(){try{return this.adminData.slice(0).map((function(t){return t.createdAt=s()(t.createdAt).local().format("YYYY-MM-DD HH:mm:ss"),t}))}catch(t){}}},created:function(){var t=this;setTimeout((function(){void 0===t.$store.state.loginAdmin.name&&t.$router.push({name:"adminLogin"})}),1e3),this.getData()},methods:{handleChange:function(){""!==this.searchAdminId||""!==this.searchLoginId||""!==this.searchName||this.getData()},handleEditAdmin:function(){var t=this;""!==this.form.name&&""!==this.form.loginId?this.$api.updateAdmin(this.form.id,{loginId:this.form.loginId,name:this.form.name}).then((function(e){e&&(t.dialogFormVisible=!1,t.success("修改成功"),t.getData())})):this.warning()},handleEdit:function(t){this.form.id=t.id,this.form.name=t.name,this.form.loginId=t.loginId,this.dialogFormVisible=!0},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$api.deleteAdmin(t.id).then((function(t){t&&(e.$message({type:"success",message:"删除成功!"}),e.getData())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})},success:function(t){this.$notify({title:t,message:t+"!",type:"success"})},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.$api.getAdminList(Object(o["a"])({limit:this.limit,page:this.nowPage,type:"管理员"},e)).then((function(e){t.total=e.count,t.adminData=e.data,t.loading=!1}))},handleSizeChange:function(t){this.nowPage=t},handleCurrentChange:function(t){this.nowPage=t},handleAdminId:function(){var t=this;""!==this.searchAdminId?(this.loading=!0,this.$api.getAdminFindById(this.searchAdminId).then((function(e){e&&(t.total=1,t.adminData=[e],t.loading=!1)}))):this.getData()},handleSearchLoginId:function(){""!==this.searchLoginId?this.getData({loginid:this.searchLoginId}):this.getData()},handleSearchName:function(){""!==this.searchName?this.getData({name:this.searchName}):this.getData()}},watch:{nowPage:function(){var t={};""!==this.searchLoginId&&(t.loginid=this.searchLoginId),""!==this.searchName&&(t.name=this.searchName),this.getData(t)}}},c=r,d=(a("5b79"),a("2877")),h=Object(d["a"])(c,n,i,!1,null,null,null);e["default"]=h.exports},"5b79":function(t,e,a){"use strict";var n=a("5300"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-53283cd6.f353b1ff.js.map