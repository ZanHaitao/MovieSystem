(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b80d8e38"],{1148:function(t,e,a){"use strict";var i=a("a691"),s=a("1d80");t.exports="".repeat||function(t){var e=String(s(this)),a="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"24bb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-payment util-wrapper"},[a("el-steps",{attrs:{active:2,"align-center":""}},[a("el-step",{attrs:{title:"选择影片场次",description:""}}),a("el-step",{attrs:{title:"选择座位",description:""}}),a("el-step",{attrs:{title:"影院取票观影",description:""}})],1),a("div",{staticClass:"content"},[a("div",{staticClass:"seat-content"},[t._m(0),a("div",{staticClass:"seat-container"},[a("div",{staticClass:"tip"},[a("ul",t._l(t.seatData,(function(e,i){return a("li",{key:i},[t._v(" "+t._s(t.letterList[i])+" ")])})),0)]),a("div",{staticClass:"right"},[a("div",{staticClass:"screen"},[t._v(" 银幕中央 ")]),a("div",{staticClass:"screen-content"},[a("ul",t._l(t.seatData,(function(e,i){return a("li",{key:i,staticClass:"row"},[a("ul",t._l(e,(function(i,s){return a("li",{key:s,staticClass:"col",class:{active1:0===i,active2:1===i,active3:2===i,active4:3===i},on:{click:function(a){return t.handleClick(e,s)}}})})),0)])})),0)])])])]),a("div",{staticClass:"movie-detail"},[a("div",{staticClass:"movie-top"},[a("div",{staticClass:"movie-image"},[a("img",{attrs:{src:t.paymentData.Movie.imgUrl,alt:""}})]),a("div",{staticClass:"movie-info"},[a("p",{staticClass:"title"},[t._v(t._s(t.paymentData.Movie.name))]),a("p",{staticClass:"type"},[t._v("类型："),a("span",[t._v(t._s(t.paymentData.Movie.type))])]),a("p",{staticClass:"duration"},[t._v("时长："),a("span",[t._v(t._s(t.paymentData.Movie.duration))])])])]),a("div",{staticClass:"cinema-content"},[a("p",{staticClass:"cinema-name"},[t._v("影院："),a("span",[t._v(t._s(t.paymentData.Cinema.name))])]),a("p",{staticClass:"cinema-screen"},[t._v("影厅："),a("span",[t._v(t._s(t.paymentData.screen))])]),a("p",{staticClass:"cinema-language"},[t._v("版本："),a("span",[t._v(t._s(t.paymentData.language))])]),a("p",{staticClass:"cinema-session"},[t._v("场次："),a("span",[t._v(t._s(t.paymentData.showDate)+" "+t._s(t.paymentData.showTime))])]),a("p",{staticClass:"cinema-price"},[t._v("票价："),a("span",[t._v("￥"+t._s(t.paymentData.price)+" / 张")])])]),a("div",{staticClass:"tip-container"},[a("p",{staticClass:"tip-title"},[t._v("座位：一次最多选6个座位")]),t._m(1),a("p",{staticClass:"tip-sum"},[t._v("总价: "),a("span",{staticClass:"tip-symbol"},[t._v("￥")]),a("span",{staticClass:"tip-price"},[t._v(t._s(t.price))])])]),a("div",{staticClass:"submit"},[a("el-popover",{attrs:{placement:"top",width:"440",trigger:"click"},on:{hide:t.handleHide}},[0!==t.seatCount?[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flag,expression:"flag"}]},[a("div",{staticClass:"logo"}),a("div",{staticClass:"tip"},[a("p",[t._v("选座成功，请前往影院取票！")])])])]:[a("div",[a("div",{staticClass:"logo"}),a("div",{staticClass:"tip"},[a("p",[t._v("还没有选择座位！")])])])],a("el-button",{attrs:{slot:"reference",round:""},on:{click:t.submit},slot:"reference"},[t._v("确认选座")])],2)],1)])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-tip"},[a("span",[t._v("可选座位")]),a("span",[t._v("已选座位")]),a("span",[t._v("已售座位")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"tip-tip"},[t._v("请"),a("span",[t._v("点击左侧")]),t._v("座位图选择座位")])}],n=(a("a434"),a("b0c0"),a("b680"),{data:function(){return{paymentData:{},seatData:[],letterList:["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],seatCount:0,flag:!0}},created:function(){var t=this;setTimeout((function(){void 0==t.$store.state.loginUser.name&&t.$router.push({name:"login"})}),1e3),this.paymentData=JSON.parse(localStorage.getItem("payment")),this.seatData=JSON.parse(this.paymentData.seat)},computed:{price:function(){return(this.seatCount*this.paymentData.price).toFixed(1)}},methods:{handleHide:function(){this.seatCount=0,this.flag=!0},submit:function(){var t=this;if(0!==this.seatCount){for(var e=0;e<this.seatData.length;e++)for(var a=0;a<this.seatData[e].length;a++)1===this.seatData[e][a]&&this.seatData[e].splice(a,1,2);this.$api.updateSession(this.paymentData.id,{seat:JSON.stringify(this.seatData)},"user").then((function(e){e&&(t.$api.addOrderList({number:t.seatCount,CinemaId:t.paymentData.CinemaId,UserId:t.$store.state.loginUser.id,MovieId:t.paymentData.MovieId,SessionId:t.paymentData.id},"user"),setTimeout((function(){t.flag=!1,t.changeData(),t.success()}),1e3))}))}else this.warning("还没有选择座位！")},handleClick:function(t,e){1===t[e]?(t.splice(e,1,0),this.seatCount--):2===t[e]||3===t[e]||this.checked()||(t.splice(e,1,1),this.seatCount++)},checked:function(){var t=6===this.seatCount;return t&&this.warning("一次最多可以选择6个座位！"),t},warning:function(t){this.$notify({title:"警告",message:t,type:"warning"})},success:function(){this.$notify({title:"选座成功",message:"恭喜您选座成功，请您前往影院取票！",type:"success"})},changeData:function(){this.$set(this.paymentData,"seat",JSON.stringify(this.seatData)),localStorage.removeItem("payment"),localStorage.setItem("payment",JSON.stringify(this.paymentData))}}}),r=n,c=(a("f8ea"),a("2877")),o=Object(c["a"])(r,i,s,!1,null,null,null);e["default"]=o.exports},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),n=a("a691"),r=a("50c4"),c=a("7b0b"),o=a("65f0"),l=a("8418"),p=a("1dde"),u=a("ae40"),v=p("splice"),d=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!v||!d},{splice:function(t,e){var a,i,p,u,v,d,C=c(this),_=r(C.length),y=s(t,_),D=arguments.length;if(0===D?a=i=0:1===D?(a=0,i=_-y):(a=D-2,i=m(f(n(e),0),_-y)),_+a-i>h)throw TypeError(g);for(p=o(C,i),u=0;u<i;u++)v=y+u,v in C&&l(p,u,C[v]);if(p.length=i,a<i){for(u=y;u<_-i;u++)v=u+i,d=u+a,v in C?C[d]=C[v]:delete C[d];for(u=_;u>_-i+a;u--)delete C[u-1]}else if(a>i)for(u=_-i;u>y;u--)v=u+i-1,d=u+a-1,v in C?C[d]=C[v]:delete C[d];for(u=0;u<a;u++)C[u+y]=arguments[u+2];return C.length=_-i+a,p}})},a6f7:function(t,e,a){},b680:function(t,e,a){"use strict";var i=a("23e7"),s=a("a691"),n=a("408a"),r=a("1148"),c=a("d039"),o=1..toFixed,l=Math.floor,p=function(t,e,a){return 0===e?a:e%2===1?p(t,e-1,a*t):p(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},v=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){o.call({})}));i({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,a,i,c,o=n(this),v=s(t),d=[0,0,0,0,0,0],f="",m="0",h=function(t,e){var a=-1,i=e;while(++a<6)i+=t*d[a],d[a]=i%1e7,i=l(i/1e7)},g=function(t){var e=6,a=0;while(--e>=0)a+=d[e],d[e]=l(a/t),a=a%t*1e7},C=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var a=String(d[t]);e=""===e?a:e+r.call("0",7-a.length)+a}return e};if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(f="-",o=-o),o>1e-21)if(e=u(o*p(2,69,1))-69,a=e<0?o*p(2,-e,1):o/p(2,e,1),a*=4503599627370496,e=52-e,e>0){h(0,a),i=v;while(i>=7)h(1e7,0),i-=7;h(p(10,i,1),0),i=e-1;while(i>=23)g(1<<23),i-=23;g(1<<i),h(1,1),g(2),m=C()}else h(0,a),h(1<<-e,0),m=C()+r.call("0",v);return v>0?(c=m.length,m=f+(c<=v?"0."+r.call("0",v-c)+m:m.slice(0,c-v)+"."+m.slice(c-v))):m=f+m,m}})},f8ea:function(t,e,a){"use strict";var i=a("a6f7"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-b80d8e38.ae62c266.js.map