(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e9bb6c6"],{"032d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-comp"},["movie"===t.type?[a("div",{staticClass:"content util-wrapper movie"},[a("div",{staticClass:"detail-image"},[a("img",{attrs:{src:t.detailData.imgUrl,alt:""}})]),a("div",{staticClass:"detail-info"},[a("p",{staticClass:"title"},[t._v(t._s(t.detailData.name))]),a("p",{staticClass:"type"},[t._v(t._s(t.detailData.type))]),a("p",{staticClass:"region"},[t._v(t._s(t.detailData.region)+" / "+t._s(t.detailData.duration))]),a("p",{staticClass:"publish"},[t._v(t._s(t.detailData.publishDate))]),a("router-link",{staticClass:"buy-btn",attrs:{tag:"p",to:{name:"cinema",params:{id:t.detailData.id}}}},[t._v(" 立 即 购 票 ")])],1),a("div",{staticClass:"detail-data"},[a("p",[t._v("想看数")]),a("p",{staticClass:"score"},[t._v(t._s(Math.floor(1e6*Math.random()-1e5+1e5)))]),a("p",[t._v("评分")]),a("p",{staticClass:"score"},[t._v(t._s(t.detailData.score))]),a("p",[t._v("累计票房")]),a("p",{staticClass:"score"},[t._v(t._s(t.detailData.income)+"亿")])]),a("div",{staticClass:"info"},[a("p",{staticClass:"title"},[t._v("剧情简介")]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.detailData.introduce)+" ")])])])]:t._e(),"cinema"===t.type?[a("div",{staticClass:"content util-wrapper cinema"},[a("div",{staticClass:"detail-image"},[a("img",{attrs:{src:t.detailData.imgUrl,alt:""}})]),a("div",{staticClass:"detail-info"},[a("p",{staticClass:"title"},[t._v(t._s(t.detailData.name))]),a("p",{staticClass:"address"},[t._v(t._s(t.detailData.address))]),a("p",{staticClass:"mobile"},[t._v("电话: "+t._s(t.detailData.mobile))]),t._m(0),t._l(t.detailData.server,(function(e){return a("p",{key:e.id,staticClass:"server"},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",{staticClass:"content"},[t._v(t._s(e.content))])])}))],2)])]:t._e()],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"division"},[t._v("影院服务 "),a("span",{staticClass:"symbol"})])}],r={props:{detailData:{type:Object,required:!0},type:{type:String,required:!0}}},n=r,c=(a("55a9"),a("2877")),l=Object(c["a"])(n,s,i,!1,null,null,null);e["a"]=l.exports},"12ae":function(t,e,a){},"19db":function(t,e,a){"use strict";var s=a("4ec2"),i=a.n(s);i.a},3403:function(t,e,a){},"3baf":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"movie-list"},["defaultMovie"===t.type?[a("ul",{staticClass:"default"},t._l(t.movieList,(function(e){return a("li",{key:e.id},[a("router-link",{staticClass:"movie-img",attrs:{tag:"p",to:{name:"movieDetail",params:{id:e.id}}}},[a("img",{attrs:{src:e.imgUrl,alt:""}}),a("span",{staticClass:"detail"},[a("span",{staticClass:"movie-title"},[t._v(t._s(e.name))]),a("span",{staticClass:"movie-score"},[t._v(t._s(e.score))])])]),a("router-link",{staticClass:"buy-ticket",attrs:{tag:"p",to:"movie-buy"}},[t._v("购 票")])],1)})),0)]:"futureMovie"===t.type?[a("ul",{staticClass:"future"},t._l(t.movieList,(function(e,s){return a("li",{key:e.id},[a("router-link",{staticClass:"movie-img",attrs:{tag:"p",to:{name:"movieDetail",params:{id:e.id}}}},[a("img",{attrs:{src:e.imgUrl,alt:""}}),a("span",{staticClass:"detail"},[a("span",{staticClass:"movie-title"},[t._v(t._s(e.name))])])]),a("p",{staticClass:"likes"},[t._v(t._s(t.likesArr[s])+"人想看")]),t._m(0,!0),a("p",{staticClass:"publish-date"},[t._v(t._s(e.publishDate))])],1)})),0)]:t._e(),"movieList"===t.type?[a("ul",{staticClass:"list"},t._l(t.movieList,(function(e){return a("li",{key:e.id},[a("router-link",{staticClass:"movie-img",attrs:{tag:"p",to:{name:"movieDetail",params:{id:e.id}}}},[a("img",{attrs:{src:e.imgUrl,alt:""}}),a("span",{staticClass:"detail"},[a("span",{staticClass:"movie-title"},[t._v(t._s(e.name))]),a("span",{staticClass:"movie-score"},[t._v(t._s(e.score))])])]),a("p",{staticClass:"title"},[t._v(t._s(e.name))]),a("p",{staticClass:"score"},[t._v(t._s(e.score))])],1)})),0)]:t._e(),"related"===t.type?[a("ul",{staticClass:"related"},t._l(t.movieList,(function(e){return a("li",{key:e.id},[a("router-link",{staticClass:"movie-img",attrs:{tag:"p",to:{name:"movieDetail",params:{id:e.id}}}},[a("img",{attrs:{src:e.imgUrl,alt:""}}),a("span",{staticClass:"detail"},[a("span",{staticClass:"movie-title"},[t._v(t._s(e.name))]),a("span",{staticClass:"movie-score"},[t._v(t._s(e.score))])])]),a("p",{staticClass:"title"},[t._v(t._s(e.name))]),a("p",{staticClass:"score"},[t._v(t._s(e.score))])],1)})),0)]:t._e(),0===t.movieList.length?[a("div",{staticClass:"error"},[t._v(" 抱歉，没有找到相关结果，请尝试用其他条件筛选。 ")])]:t._e()],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"movie-btn"},[a("span",[t._v("预告片")]),a("span",[t._v("预售")])])}],r={props:{type:{type:String,required:!0},movieList:{type:Array,required:!0}},data:function(){return{likesArr:[]}},created:function(){for(var t=0;t<8;t++)this.likesArr.push(Math.floor(1e4*Math.random()-1e3+1e3))}},n=r,c=(a("19db"),a("2877")),l=Object(c["a"])(n,s,i,!1,null,null,null);e["a"]=l.exports},"4ec2":function(t,e,a){},"513c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"movie-detail"},[a("my-detail",{attrs:{detailData:t.movieData,type:"movie"}}),a("div",{staticClass:"util-wrapper nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/movie"}}},[t._v("电影")]),a("el-breadcrumb-item",[t._v(t._s(t.movieData.name))])],1)],1),a("div",{staticClass:"container util-wrapper"},[a("div",{staticClass:"left-content"},[a("my-comment",{attrs:{movieId:t.movieId}})],1),a("div",{staticClass:"right-content"},[a("div",{staticClass:"title"},[t._v(" 相关电影 ")]),a("div",{staticClass:"content"},[a("my-movie",{attrs:{type:"related",movieList:t.movieListData}})],1)])])],1)},i=[],r=a("032d"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment"},[a("div",{staticClass:"title"},[t._v(" 热门短评 ")]),""!==t.loginUser?[a("div",{staticClass:"publish-comment"},[a("el-popover",{attrs:{placement:"bottom",width:"500",trigger:"click"}},[a("div",{staticClass:"score"},[a("span",[t._v("评分：")]),a("el-rate",{model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1),a("div",{staticClass:"content"},[a("p",[t._v("内容：")]),a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("el-button",{on:{click:t.publishComment}},[t._v("发布")]),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("发布评论")])],1)],1)]:t._e(),a("div",{staticClass:"content"},[0===t.commentsData.length?[a("div",{staticClass:"error"},[t._v(" 当前影片暂无评论，赶快去抢占沙发把。 ")])]:t._e(),a("ul",t._l(t.commentsData,(function(e,s){return a("li",{key:e.id},[a("div",{staticClass:"portrait"},[a("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),a("div",{staticClass:"detail"},[a("p",{staticClass:"name"},[t._v(t._s(e.User.name+e.User.id))]),a("p",{staticClass:"score"},[a("span",{staticClass:"publish"},[t._v(t._s(e.publishDate))]),a("el-rate",{attrs:{value:+e.score/2,disabled:"","score-template":"{value}"}}),a("span",{staticClass:"likes",class:{active:!0===t.likes[s]},on:{click:function(a){return t.changLikes(s,e)}}},[a("i",{staticClass:"el-icon-sugar"}),a("span",[t._v(t._s(e.likes))])])],1),a("p",{staticClass:"content"},[t._v(" "+t._s(e.content)+" ")])])])})),0)],2)],2)},c=[],l=(a("99af"),a("a434"),a("b0c0"),a("a9e3"),{props:{movieId:{type:[String,Number],required:!0}},data:function(){return{commentsData:[],likes:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],loginUser:this.$store.state.loginUser.name?this.$store.state.loginUser.name:"",score:0,textarea:""}},mounted:function(){this.changeData()},computed:{userLogin:function(){return this.$store.state.loginUser}},methods:{publishComment:function(){var t=this;if(console.log(this.$store.state.loginUser.id),0!=this.textarea.length&&0!=this.score){var e=new Date;this.$api.addComment({UserId:this.$store.state.loginUser.id,MovieId:this.movieId,content:this.textarea,score:2*this.score,likes:0,publishDate:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()+1)},"user").then((function(e){e&&(t.changeData(),t.success())}))}else this.warning()},success:function(){this.$notify({title:"发布成功",message:"评论发布成功！",type:"success"})},changLikes:function(t,e){this.likes.splice(t,1,!this.likes[t]),!0===this.likes[t]?this.$set(e,e.likes,e.likes++):this.$set(e,e.likes,e.likes--)},changeData:function(){var t=this;this.$api.getCommentList({movieid:this.movieId},"user").then((function(e){t.commentsData=e.data}))},warning:function(){this.$notify({title:"警告",message:"信息填写不完整！",type:"warning"})}},watch:{$route:function(){this.changeData(),this.likes.splice(0,10,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1)},userLogin:function(){this.loginUser=this.$store.state.loginUser.name}}}),o=l,u=(a("865a"),a("2877")),d=Object(u["a"])(o,n,c,!1,null,null,null),v=d.exports,m=a("3baf"),p={data:function(){return{movieId:this.$route.params.id,movieData:{},movieListData:[]}},components:{MyDetail:r["a"],MyComment:v,MyMovie:m["a"]},created:function(){this.movieId=this.$route.params.id},methods:{changData:function(){var t=this;this.$api.getMovieFindById(this.$route.params.id).then((function(e){t.movieData=e}),"user"),this.$api.getMovieList({limit:15},"user").then((function(e){t.movieListData=e.data})),this.movieId=this.$route.params.id}},mounted:function(){this.changData()},watch:{$route:function(){this.changData()}}},f=p,_=(a("615b"),Object(u["a"])(f,s,i,!1,null,null,null));e["default"]=_.exports},"521e":function(t,e,a){},"55a9":function(t,e,a){"use strict";var s=a("12ae"),i=a.n(s);i.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),i=a("5899"),r="["+i+"]",n=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),l=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"615b":function(t,e,a){"use strict";var s=a("3403"),i=a.n(s);i.a},7156:function(t,e,a){var s=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var r,n;return i&&"function"==typeof(r=e.constructor)&&r!==a&&s(n=r.prototype)&&n!==a.prototype&&i(t,n),t}},"865a":function(t,e,a){"use strict";var s=a("521e"),i=a.n(s);i.a},"99af":function(t,e,a){"use strict";var s=a("23e7"),i=a("d039"),r=a("e8b5"),n=a("861d"),c=a("7b0b"),l=a("50c4"),o=a("8418"),u=a("65f0"),d=a("1dde"),v=a("b622"),m=a("2d00"),p=v("isConcatSpreadable"),f=9007199254740991,_="Maximum allowed index exceeded",h=m>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),C=function(t){if(!n(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},b=!h||!g;s({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,s,i,r,n=c(this),d=u(n,0),v=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?n:arguments[e],C(r)){if(i=l(r.length),v+i>f)throw TypeError(_);for(a=0;a<i;a++,v++)a in r&&o(d,v,r[a])}else{if(v>=f)throw TypeError(_);o(d,v++,r)}return d.length=v,d}})},a434:function(t,e,a){"use strict";var s=a("23e7"),i=a("23cb"),r=a("a691"),n=a("50c4"),c=a("7b0b"),l=a("65f0"),o=a("8418"),u=a("1dde"),d=a("ae40"),v=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,_=9007199254740991,h="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!v||!m},{splice:function(t,e){var a,s,u,d,v,m,g=c(this),C=n(g.length),b=i(t,C),y=arguments.length;if(0===y?a=s=0:1===y?(a=0,s=C-b):(a=y-2,s=f(p(r(e),0),C-b)),C+a-s>_)throw TypeError(h);for(u=l(g,s),d=0;d<s;d++)v=b+d,v in g&&o(u,d,g[v]);if(u.length=s,a<s){for(d=b;d<C-s;d++)v=d+s,m=d+a,v in g?g[m]=g[v]:delete g[m];for(d=C;d>C-s+a;d--)delete g[d-1]}else if(a>s)for(d=C-s;d>b;d--)v=d+s-1,m=d+a-1,v in g?g[m]=g[v]:delete g[m];for(d=0;d<a;d++)g[d+b]=arguments[d+2];return g.length=C-s+a,u}})},a9e3:function(t,e,a){"use strict";var s=a("83ab"),i=a("da84"),r=a("94ca"),n=a("6eeb"),c=a("5135"),l=a("c6b6"),o=a("7156"),u=a("c04e"),d=a("d039"),v=a("7c73"),m=a("241c").f,p=a("06cf").f,f=a("9bf2").f,_=a("58a8").trim,h="Number",g=i[h],C=g.prototype,b=l(v(C))==h,y=function(t){var e,a,s,i,r,n,c,l,o=u(t,!1);if("string"==typeof o&&o.length>2)if(o=_(o),e=o.charCodeAt(0),43===e||45===e){if(a=o.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(o.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+o}for(r=o.slice(2),n=r.length,c=0;c<n;c++)if(l=r.charCodeAt(c),l<48||l>i)return NaN;return parseInt(r,s)}return+o};if(r(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var D,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(b?d((function(){C.valueOf.call(a)})):l(a)!=h)?o(new g(y(e)),a,k):y(e)},I=s?m(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;I.length>$;$++)c(g,D=I[$])&&!c(k,D)&&f(k,D,p(g,D));k.prototype=C,C.constructor=k,n(i,h,k)}}}]);
//# sourceMappingURL=chunk-2e9bb6c6.e08f6ec9.js.map